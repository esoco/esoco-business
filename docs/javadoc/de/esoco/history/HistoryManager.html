<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc (1.8.0_191) on Mon Oct 29 18:19:16 CET 2018 -->
<title>HistoryManager (esoco-business 1.3.0 API)</title>
<meta name="date" content="2018-10-29">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="HistoryManager (esoco-business 1.3.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9,"i10":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../de/esoco/history/HistoryRecord.html" title="class in de.esoco.history"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?de/esoco/history/HistoryManager.html" target="_top">Frames</a></li>
<li><a href="HistoryManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">de.esoco.history</div>
<h2 title="Class HistoryManager" class="title">Class HistoryManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>de.esoco.history.HistoryManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@Annotations.RelationTypeNamespace(value="de.esoco.history")
public class <span class="typeNameLabel">HistoryManager</span>
extends java.lang.Object</pre>
<div class="block">This class contains static methods to query, create, and manipulate history
 records. The manipulation methods like <a href="../../../de/esoco/history/HistoryManager.html#begin-de.esoco.entity.Entity-de.esoco.entity.Entity-java.lang.String-"><code>begin(Entity, Entity, String)</code></a>
 are thread-based, i.e. they record history entries based on the invoking
 thread.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#DEFAULT_HISTORY_NOTE_TEMPLATES">DEFAULT_HISTORY_NOTE_TEMPLATES</a></span></code>
<div class="block">The key for the default templates in <a href="../../../de/esoco/history/HistoryManager.html#HISTORY_NOTE_TEMPLATES"><code>HISTORY_NOTE_TEMPLATES</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static org.obrel.core.RelationType&lt;java.lang.Boolean&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#HISTORIZED">HISTORIZED</a></span></code>
<div class="block">A flag relation type that marks objects which create history records.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.obrel.core.RelationType&lt;java.util.Map&lt;java.lang.String,java.lang.String&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#HISTORY_NOTE_TEMPLATES">HISTORY_NOTE_TEMPLATES</a></span></code>
<div class="block">A configuration extra attribute that contains mapping from process names
 to templates for history notes.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#begin-de.esoco.entity.Entity-de.esoco.entity.Entity-java.lang.String-">begin</a></span>(<a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rOrigin,
     <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rTarget,
     java.lang.String&nbsp;sValue)</code>
<div class="block">Begins a new group of history records for the current thread.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#commit-boolean-">commit</a></span>(boolean&nbsp;bKeepIfEmpty)</code>
<div class="block">Commits a group of history records.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static java.util.List&lt;<a href="../../../de/esoco/history/HistoryRecord.html" title="class in de.esoco.history">HistoryRecord</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#getHistoryFor-de.esoco.entity.Entity-de.esoco.history.HistoryRecord.HistoryType-">getHistoryFor</a></span>(<a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rTarget,
             <a href="../../../de/esoco/history/HistoryRecord.HistoryType.html" title="enum in de.esoco.history">HistoryRecord.HistoryType</a>&nbsp;rType)</code>
<div class="block">Returns the history entries for a target object that have a certain type.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static java.util.List&lt;<a href="../../../de/esoco/history/HistoryRecord.html" title="class in de.esoco.history">HistoryRecord</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#getHistoryFor-de.esoco.entity.Entity-de.esoco.history.HistoryRecord.HistoryType-java.util.Date-java.util.Date-de.esoco.entity.Entity-">getHistoryFor</a></span>(<a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rTarget,
             <a href="../../../de/esoco/history/HistoryRecord.HistoryType.html" title="enum in de.esoco.history">HistoryRecord.HistoryType</a>&nbsp;rType,
             java.util.Date&nbsp;rFromDate,
             java.util.Date&nbsp;rToDate,
             <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rOrigin)</code>
<div class="block">Returns the history entries for a target object.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static de.esoco.storage.Storage</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#getHistoryStorage--">getHistoryStorage</a></span>()</code>
<div class="block">Returns the storage instance that will be used by history operations from
 the current (= invoking) thread to access history records.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#init--">init</a></span>()</code>
<div class="block">This method should be invoked at application startup to initialize the
 history functionality.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#isRecording--">isRecording</a></span>()</code>
<div class="block">Allows to check whether a history is recorded for the current thread.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#record-de.esoco.history.HistoryRecord.HistoryType-de.esoco.entity.Entity-de.esoco.entity.Entity-de.esoco.entity.Entity-java.lang.String-de.esoco.history.HistoryRecord.ReferenceType-java.lang.String-">record</a></span>(<a href="../../../de/esoco/history/HistoryRecord.HistoryType.html" title="enum in de.esoco.history">HistoryRecord.HistoryType</a>&nbsp;rType,
      <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rOrigin,
      <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rTarget,
      <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rRootTarget,
      java.lang.String&nbsp;sValue,
      <a href="../../../de/esoco/history/HistoryRecord.ReferenceType.html" title="enum in de.esoco.history">HistoryRecord.ReferenceType</a>&nbsp;rReferenceType,
      java.lang.String&nbsp;sReferenceValue)</code>
<div class="block">Records a history entry with a reference value.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#record-de.esoco.history.HistoryRecord.HistoryType-de.esoco.entity.Entity-de.esoco.entity.Entity-java.lang.String-">record</a></span>(<a href="../../../de/esoco/history/HistoryRecord.HistoryType.html" title="enum in de.esoco.history">HistoryRecord.HistoryType</a>&nbsp;rType,
      <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rOrigin,
      <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rTarget,
      java.lang.String&nbsp;sValue)</code>
<div class="block">Records a history entry.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#rollback--">rollback</a></span>()</code>
<div class="block">Cancels any currently active hierarchy of history records and discards
 it.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../de/esoco/history/HistoryManager.html#shutdown--">shutdown</a></span>()</code>
<div class="block">Performs a shutdown of the history manager and frees all allocated
 resources.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_HISTORY_NOTE_TEMPLATES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_HISTORY_NOTE_TEMPLATES</h4>
<pre>public static final&nbsp;java.lang.String DEFAULT_HISTORY_NOTE_TEMPLATES</pre>
<div class="block">The key for the default templates in <a href="../../../de/esoco/history/HistoryManager.html#HISTORY_NOTE_TEMPLATES"><code>HISTORY_NOTE_TEMPLATES</code></a>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#de.esoco.history.HistoryManager.DEFAULT_HISTORY_NOTE_TEMPLATES">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="HISTORIZED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HISTORIZED</h4>
<pre>public static final&nbsp;org.obrel.core.RelationType&lt;java.lang.Boolean&gt; HISTORIZED</pre>
<div class="block">A flag relation type that marks objects which create history records.
 This can be used as a hint to wrap it in a history group if necessary.</div>
</li>
</ul>
<a name="HISTORY_NOTE_TEMPLATES">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>HISTORY_NOTE_TEMPLATES</h4>
<pre>public static final&nbsp;org.obrel.core.RelationType&lt;java.util.Map&lt;java.lang.String,java.lang.String&gt;&gt; HISTORY_NOTE_TEMPLATES</pre>
<div class="block">A configuration extra attribute that contains mapping from process names
 to templates for history notes. The map values must be in the form
 "[Template]\n[Template]\n..." where each template must have the format
 "[Title]|[Text]". [Title] must not contain linefeeds or other control
 characters and preferably only text to prevent parsing errors of the
 extra attribute. If the [Text] part needs to contain linefeeds they must
 be escaped as '$n'.

 <p>The map key is either the name of the process in which the templates
 should be applied or the string <a href="../../../de/esoco/history/HistoryManager.html#DEFAULT_HISTORY_NOTE_TEMPLATES"><code>DEFAULT_HISTORY_NOTE_TEMPLATES</code></a>
 for which the value contains the default templates that are always
 available.</p></div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="begin-de.esoco.entity.Entity-de.esoco.entity.Entity-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>begin</h4>
<pre>public static&nbsp;void&nbsp;begin(<a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rOrigin,
                         <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rTarget,
                         java.lang.String&nbsp;sValue)</pre>
<div class="block">Begins a new group of history records for the current thread. The topmost
 group and all it's children will be made persistent when a matching call
 to <a href="../../../de/esoco/history/HistoryManager.html#commit-boolean-"><code>commit(boolean)</code></a> is made. A call to the <a href="../../../de/esoco/history/HistoryManager.html#rollback--"><code>rollback()</code></a>
 method will cancel the complete history group hierarchy.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rOrigin</code> - The entity from which the record originates (may be NULL)</dd>
<dd><code>rTarget</code> - The target entity referenced by the record (may be NULL)</dd>
<dd><code>sValue</code> - The value of this record</dd>
</dl>
</li>
</ul>
<a name="commit-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public static&nbsp;void&nbsp;commit(boolean&nbsp;bKeepIfEmpty)
                   throws de.esoco.lib.manage.TransactionException</pre>
<div class="block">Commits a group of history records. The group must previously have been
 started with a call to <a href="../../../de/esoco/history/HistoryManager.html#begin-de.esoco.entity.Entity-de.esoco.entity.Entity-java.lang.String-"><code>begin(Entity, Entity, String)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bKeepIfEmpty</code> - TRUE to keep empty groups, FALSE to discard them</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>de.esoco.lib.manage.TransactionException</code> - If storing the group fails</dd>
</dl>
</li>
</ul>
<a name="getHistoryFor-de.esoco.entity.Entity-de.esoco.history.HistoryRecord.HistoryType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHistoryFor</h4>
<pre>public static&nbsp;java.util.List&lt;<a href="../../../de/esoco/history/HistoryRecord.html" title="class in de.esoco.history">HistoryRecord</a>&gt;&nbsp;getHistoryFor(<a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rTarget,
                                                          <a href="../../../de/esoco/history/HistoryRecord.HistoryType.html" title="enum in de.esoco.history">HistoryRecord.HistoryType</a>&nbsp;rType)
                                                   throws de.esoco.storage.StorageException</pre>
<div class="block">Returns the history entries for a target object that have a certain type.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rTarget</code> - The target entity to search records for</dd>
<dd><code>rType</code> - The type of the history records to query or NULL</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of history records that match the given criteria (may be
         empty but will never be NULL)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>de.esoco.storage.StorageException</code> - If querying the history storage fails</dd>
<dd><code>java.lang.IllegalArgumentException</code> - If the target entity is NULL</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>#getHistoryFor(Entity, HistoryType, Date, Date, Entity)</code></dd>
</dl>
</li>
</ul>
<a name="getHistoryFor-de.esoco.entity.Entity-de.esoco.history.HistoryRecord.HistoryType-java.util.Date-java.util.Date-de.esoco.entity.Entity-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHistoryFor</h4>
<pre>public static&nbsp;java.util.List&lt;<a href="../../../de/esoco/history/HistoryRecord.html" title="class in de.esoco.history">HistoryRecord</a>&gt;&nbsp;getHistoryFor(<a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rTarget,
                                                          <a href="../../../de/esoco/history/HistoryRecord.HistoryType.html" title="enum in de.esoco.history">HistoryRecord.HistoryType</a>&nbsp;rType,
                                                          java.util.Date&nbsp;rFromDate,
                                                          java.util.Date&nbsp;rToDate,
                                                          <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rOrigin)
                                                   throws de.esoco.storage.StorageException</pre>
<div class="block">Returns the history entries for a target object. The returned records can
 optionally be constrained to certain criteria. Criteria that are NULL
 will be ignored.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rTarget</code> - The target entity to search records for</dd>
<dd><code>rType</code> - The type of the history records to query or NULL</dd>
<dd><code>rFromDate</code> - The start date for the queried records or NULL</dd>
<dd><code>rToDate</code> - The end date for the queried records or NULL</dd>
<dd><code>rOrigin</code> - The origin entity to search records for or NULL</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of history records that match the given criteria (may be
         empty but will never be NULL)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>de.esoco.storage.StorageException</code> - If querying the history storage fails</dd>
<dd><code>java.lang.IllegalArgumentException</code> - If the target entity is NULL</dd>
</dl>
</li>
</ul>
<a name="getHistoryStorage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHistoryStorage</h4>
<pre>public static&nbsp;de.esoco.storage.Storage&nbsp;getHistoryStorage()
                                                  throws de.esoco.storage.StorageException</pre>
<div class="block">Returns the storage instance that will be used by history operations from
 the current (= invoking) thread to access history records. When the
 returned storage instance is no longer needed, the calling code must
 invoke the method <code>Storage.release()</code> to free the storage
 resources. See the method <code>StorageManager.getStorage(Object)</code> for
 details.

 <p>This method is intended mainly for internal use by the history
 implementation but it may also be used by special application code which
 needs to access the history storage and is therefore public. Applications
 should be careful when manipulating the history storage, especially when
 invoking <code>Storage.commit()</code> or <code>Storage.rollback()</code>.
 Furthermore, if no history operations have been performed by the current
 thread before, the invocation may create a new storage instance and thus
 acquire system resources.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The history storage instance for the current thread</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>de.esoco.storage.StorageException</code> - If acquiring a new storage instance fails</dd>
</dl>
</li>
</ul>
<a name="init--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public static&nbsp;void&nbsp;init()</pre>
<div class="block">This method should be invoked at application startup to initialize the
 history functionality.</div>
</li>
</ul>
<a name="isRecording--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isRecording</h4>
<pre>public static&nbsp;boolean&nbsp;isRecording()</pre>
<div class="block">Allows to check whether a history is recorded for the current thread.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The recording</dd>
</dl>
</li>
</ul>
<a name="record-de.esoco.history.HistoryRecord.HistoryType-de.esoco.entity.Entity-de.esoco.entity.Entity-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>record</h4>
<pre>public static&nbsp;void&nbsp;record(<a href="../../../de/esoco/history/HistoryRecord.HistoryType.html" title="enum in de.esoco.history">HistoryRecord.HistoryType</a>&nbsp;rType,
                          <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rOrigin,
                          <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rTarget,
                          java.lang.String&nbsp;sValue)
                   throws de.esoco.lib.manage.TransactionException</pre>
<div class="block">Records a history entry. If a history group has been started before by
 means of <a href="../../../de/esoco/history/HistoryManager.html#begin-de.esoco.entity.Entity-de.esoco.entity.Entity-java.lang.String-"><code>begin(Entity, Entity, String)</code></a> the new entry will be
 added as a detail record to that group. If no group is active a single
 history record will be created and stored immediately.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rType</code> - The type of the new history record</dd>
<dd><code>rOrigin</code> - The entity from which the record originates (may be NULL)</dd>
<dd><code>rTarget</code> - The target entity referenced by the record (may be NULL)</dd>
<dd><code>sValue</code> - The value of this record</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>de.esoco.lib.manage.TransactionException</code> - If storing the new record fails</dd>
</dl>
</li>
</ul>
<a name="record-de.esoco.history.HistoryRecord.HistoryType-de.esoco.entity.Entity-de.esoco.entity.Entity-de.esoco.entity.Entity-java.lang.String-de.esoco.history.HistoryRecord.ReferenceType-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>record</h4>
<pre>public static&nbsp;void&nbsp;record(<a href="../../../de/esoco/history/HistoryRecord.HistoryType.html" title="enum in de.esoco.history">HistoryRecord.HistoryType</a>&nbsp;rType,
                          <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rOrigin,
                          <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rTarget,
                          <a href="../../../de/esoco/entity/Entity.html" title="class in de.esoco.entity">Entity</a>&nbsp;rRootTarget,
                          java.lang.String&nbsp;sValue,
                          <a href="../../../de/esoco/history/HistoryRecord.ReferenceType.html" title="enum in de.esoco.history">HistoryRecord.ReferenceType</a>&nbsp;rReferenceType,
                          java.lang.String&nbsp;sReferenceValue)
                   throws de.esoco.lib.manage.TransactionException</pre>
<div class="block">Records a history entry with a reference value. If a history group has
 been started before by means of <a href="../../../de/esoco/history/HistoryManager.html#begin-de.esoco.entity.Entity-de.esoco.entity.Entity-java.lang.String-"><code>begin(Entity, Entity, String)</code></a>
 the new entry will be added as a detail record to that group. If no group
 is active a single history record will be created and stored immediately.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rType</code> - The type of the new history record</dd>
<dd><code>rOrigin</code> - The entity from which the record originates (may
                         be NULL)</dd>
<dd><code>rTarget</code> - The target entity referenced by the record (may
                         be NULL)</dd>
<dd><code>rRootTarget</code> - The root target entity of the record (may be
                         NULL, will be ignored if a group is active)</dd>
<dd><code>sValue</code> - The value of this record</dd>
<dd><code>rReferenceType</code> - The type of the reference value</dd>
<dd><code>sReferenceValue</code> - The reference value</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>de.esoco.lib.manage.TransactionException</code> - If storing the new record fails</dd>
</dl>
</li>
</ul>
<a name="rollback--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollback</h4>
<pre>public static&nbsp;void&nbsp;rollback()</pre>
<div class="block">Cancels any currently active hierarchy of history records and discards
 it. This method must be invoked when an exception occurs after a history
 group has been started with <a href="../../../de/esoco/history/HistoryManager.html#begin-de.esoco.entity.Entity-de.esoco.entity.Entity-java.lang.String-"><code>begin(Entity, Entity, String)</code></a> to
 remove any remaining history group for the current thread. Additional
 invocations of this method will be ignored.</div>
</li>
</ul>
<a name="shutdown--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>shutdown</h4>
<pre>public static&nbsp;void&nbsp;shutdown()</pre>
<div class="block">Performs a shutdown of the history manager and frees all allocated
 resources.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../de/esoco/history/HistoryRecord.html" title="class in de.esoco.history"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?de/esoco/history/HistoryManager.html" target="_top">Frames</a></li>
<li><a href="HistoryManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
